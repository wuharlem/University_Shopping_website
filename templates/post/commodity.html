{% load static %}
{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8"> 
   <title>NTU SHOPPING</title>
   <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"> 
   <script src="{% static 'account/js/jquery-2.2.3.min.js'%}"></script>
   <script src="{% static 'account/js/bootstrap.min.js'%}"></script>
   <script>
    function openNav() {
    document.getElementById("mySidenav").style.width = "250px";
  }
  function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
  }
</script>
<script>
    function ManageopenNav() {
    document.getElementById("ManagemySidenav").style.height = "100%";
  }
  function ManagecloseNav() {
    document.getElementById("ManagemySidenav").style.height = "0";
  }
</script>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12" style="background-color: #761822;overflow: hidden;">
        <div class="col-md-3" style="font-family: impact;color: white;font-weight: bold;font-size: 28px;padding: 8px;margin-left: 3.9%;">
          <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;收回</a>
            <a style="background-color: #94333D" href="{%url 'index' "CP" 1 %}">電腦 , 手機 , 電子周邊</a>
            <a style="background-color: #761822" href="{%url 'index' "FN" 1 %}">家電 , 家具</a>
            <a style="background-color: #94333D" href="{%url 'index' "TR" 1 %}">交通工具</a>
            <a style="background-color: #761822" href="{%url 'index' "TF" 1 %}">玩具 , 公仔 , 電玩</a>
            <a style="background-color: #94333D" href="{%url 'index' "HB" 1 %}">生活居家</a>
            <a style="background-color: #761822" href="{%url 'index' "CL" 1 %}">服飾</a>
            <a style="background-color: #94333D" href="{%url 'index' "AC" 1 %}">飾品 , 配件</a>
            <a style="background-color: #761822" href="{%url 'index' "FD" 1 %}">食品</a>
            <a style="background-color: #94333D" href="{%url 'index' "CS" 1 %}">保養 , 彩妝</a>
            <a style="background-color: #761822" href="{%url 'index' "BK" 1 %}">書籍</a>
            <a style="background-color: #94333D" href="{%url 'index' "MM" 1 %}">音樂 , 電影 , 文創</a>
            <a style="background-color: #761822" href="{%url 'index' "HS" 1 %}">租屋</a>
            <a style="background-color: #94333D" href="{%url 'index' "SP" 1 %}">運動</a>
            <a style="background-color: #761822" href="{%url 'index' "OT" 1 %}">其他</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
            <a style="background-color: #761822" href="#">&nbsp;</a>
            <a style="background-color: #94333D" href="#">&nbsp;</a>
          </div>
          <a style="font-size:34px;cursor:pointer" onclick="openNav()">&#9776;</a>
          <a href="{% url 'index' "ALL" 1 %}">NTU SHOPPING</a>
        </div>
        <div style="padding: 18px;left:-7.3% ;" class="col-md-6"><input style="width: 143%;font-size:15px;color:#4D060C;font-family:微軟正黑體;font-weight:900; padding: 10px" type="text" class="form-control" placeholder="請輸入關鍵字">
        </div>
        <div class="col-md-1"></div>
        <div class="col-md-2" style="padding: 18px;left: 12.5%">
          <div id="ManagemySidenav" class="Managesidenav" style="">
            <a style="background-color: #4D060C " href="javascript:void(0)" class="Manageclosebtn" onclick="ManagecloseNav()"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;收回</a>
            <a style="background-color: #94333D" href="{%url 'manage' 1 %}">我的商品</a>
            <a style="background-color: #761822" href="{%url 'profile' username %}">關於我</a>
            <a style="background-color: #94333D" href="{%url 'cart' 1 %}">購物車</a>
            <a style="background-color: #761822" href="{%url 'post' %}">賣東西</a>
            <a style="background-color: #94333D" href="{%url 'chat_index' %}">訊息</a>
            <a style="background-color: #761822" href="{% url 'logout' %}">登出</a>
          </div>
          <img class="zoomhead" src="{{profile.picture.url}}" style="margin-left: -2%;width: 35px; height: 35px; border-radius: 100%;border: solid white;" onclick="ManageopenNav()">
        </div>
  </div>
        <form id = "edit_form" method="post" enctype="multipart/form-data">{% csrf_token %}
        <div class="col-md-12" style="padding: 7%;margin-top: ">
          <div style="margin-top: -5%">
            <div class="row">
              
            <div class="col-md-5" style="box-shadow:0 0px 3px 0 rgba(0, 0, 0, 0.2);margin-top: %">
              <div>
              <img id = "picture" class="img-responsive" src="{{production.img.url}}" class="img-fluid" alt="Responsive image">
              <input id = "picture_edit" name="picture" style="position: absolute;color: grey;font-size: 12px;left: 35%;top:45%;font-family: 微軟正黑體;font-weight: 900;" type='hidden' accept="image/*" onchange="readURL(this);"/>
              </div>
            </div>
            <div class="col-md-1"></div>
            <div class="col-md-6" style="padding: 0px;">
              <table class="table table-striped" class="table-responsive-md" style="table-layout:fixed">

                      <input id="name" type="name" name = "name" value="{{production.name}}" disabled style="width: 100%;font-family:微軟正黑體;font-weight: 900;padding: 10px;font-size: 18px;border-style:none;color:black">
                <tbody>
                  <tr>
                    <th>&nbsp;&nbsp;價格</th>
                    <td><input id="price" type="text" name="price" value="{{production.price}}" disabled style="font-family: impact;width: 100%;border-style:none;padding: 1%;background-color: #F9F9F9;"></td>
                  </tr>
                  <tr>
                    <th>&nbsp;&nbsp;新舊</th>
                    <td style=""><input id="status" type="text" name="status" value="{{production.status}}" disabled style="font-family: 微軟正黑體;font-weight: 900;width: 100%;border-style:none;padding: 1%;"></td>
                  </tr>
                  <tr>
                    <th>&nbsp;&nbsp;剩餘數量</th>
                    <td><input id="number" type="text" name="number" value="{{production.number}}" disabled style="font-family: impact;width: 100%;border-style:none;padding: 1%;background-color: #F9F9F9;"></td>
                  </tr>
                  <tr>
                    <th>&nbsp;&nbsp;商品類型</th>
                    <td>
                      <input id="type" type="text" value="{{production.get_type_display}}" disabled style="font-family: 微軟正黑體;font-weight: 900;width: 100%;border-style:none;">
                      <select name="tp" id="select" style="visibility: hidden;font-family: 微軟正黑體;font-weight: 900;width: 100%;border-style:none;padding: 1%;">
                      {% for t in production.SHOPPING_CHOICES %}
                        <option value="{{t.0}}">{{t.1}}</option>
                      {% endfor %}
                      </select>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="col-md-5" style="padding: 0px;margin-top: %;">
                <button type="button" value="" data-toggle="dropdown" style="background-color:#761822;color: white;font-family: 微軟正黑體;font-weight: 900;width: 100%;font-size: 18px;padding: 1%;">
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" style="width: 80%; padding: 0px;">
                  <li><input id="button" type="button" onclick="edit()" value="編輯" style="background-color:#761822;color: white;font-family: 微軟正黑體;font-weight: 900;width: 100%;font-size: 16px;padding: 1%;";></li>
                  <li><input id="chat" type="button" onclick="location.href='{%url 'chat_room' chatroom.id %}';" value="訊息" style="background-color:#761822;color: white;font-family: 微軟正黑體;font-weight: 900;width: 100%;font-size: 16px;padding: 1%;margin-top: 0%;"></li>
                  <li>
                    <input type="button" onclick="location.href='{% url 'profile' production.owner %}';"  value="賣家賣場" style="background-color:#761822;color: white;font-family: 微軟正黑體;font-weight: 900;width: 100%;font-size: 16px;padding: 1%;margin-top: 0%;">
                  </li>
                  <li>
                    <input id="finish" type="submit" name="finish" value="結案" style="background-color:#761822;color: white;font-family: 微軟正黑體;font-weight: 900;width: 100%;font-size: 16px;padding: 1%;margin-top: 0%;">
                  </li>
                </ul>
              </div>
              <div class="col-md-2"></div>
              <div class="col-md-5" style="padding: 0px;margin-top: %;">
                <script>
                  function success() {
                    alert("成功！");
                  }
                </script>
                <form action="" method="post">{% csrf_token %}
                  <input type="hidden" name="rank" value={{production.id}}>
                  <input id="rank" type="submit" value = "排" onclick="success()" style="background-color:#761822;color: white;font-family: 微軟正黑體;font-weight: 900;width: 100%;font-size: 18px;padding: 1%;">
                  <br><br>
                  {% for ranker in ranker_list%}
                    <img class="zoomhead" src="{{ranker.picture.url}}" style="margin-left: -2%;width: 35px; height: 35px; border-radius: 100%;border: solid white;"
                    onclick="location.href='{%url 'profile' ranker %}'">
                  {% endfor %}
                </form>
              </div>
            </div>
              <div class="col-md-12" style="background-color: ;width: 100%;left: %;color: #761822;font-family: 微軟正黑體;font-weight: 900;font-size: 18px;padding: 0%;margin-top: 3%">
                <div style="border-bottom-width:3px;border-bottom-style:solid;border-color:#761822;width: 88px;padding: 5px">商品介紹:</div> 
            <div style="padding: 2%">
              <textarea id = "intro" form = "edit_form" name = "intro" contenteditable = "false" style="width: 100%;height:300px;color: black;border-style: none;padding: 0px" disabled>{{production.introduction}}
            </textarea>
          </div>
            </div>
          </div>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>
<style type="text/css">
  th{
    color: grey;
  }
  a{
    color: white;
    text-decoration:none;
  }
  a:hover{
    color: white;
    text-decoration:none;
  }

.sidenav {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 1;
    top: 0;
    left: 0;
    background-color: #4D060C;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: px;
    overflow: hidden;
}

.sidenav a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 16px;
    color: white;
    display: block;
    transition: 0.3s;
}

.sidenav a:hover {
    color: #818181;
}


.Managesidenav {
    height: 0;
    width: 250px;
    position: fixed;
    z-index: 1;
    top: 0px;
    right: 0;
    overflow-x: hidden;
    transition: 0.5s;
}

.Managesidenav a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 16px;
    font-weight: 900;
    color: white;
    display: block;
    transition: 0.3s;
}

.Managesidenav a:hover {
    color: #818181;
}
.zoomhead {
    transition: transform .2s;
    margin: 0 auto;
}
.zoomhead:hover {
    transform: scale(1.3);
    opacity: 1;
    background-color: black;
}
</style>
<script type="text/javascript">
  var editable = "{{editable}}";
  var rankable = "{{rankable}}";
  if (editable == "False"){
    document.getElementById("finish").type = "hidden";
    document.getElementById("button").type = "hidden";
  }

  if (editable != "False"){
    document.getElementById("chat").type = "hidden";
    document.getElementById("rank").type = "hidden";
  }

  if (rankable == "False") {
    document.getElementById("rank").value = "取消排隊";
  }

  function edit() {
    var name = document.getElementById("name");
    var price = document.getElementById("price");
    var status = document.getElementById("status");
    var number = document.getElementById("number");
    var type = document.getElementById("type");

    var sel = document.getElementById("select");


    var picture = document.getElementById("picture");
    var picture_edit = document.getElementById("picture_edit");

    var form = document.getElementById("edit_form");

    var button = document.getElementById("button");

    var introduction = document.getElementById("intro");

    if (button.value == "編輯") {
      name.disabled = false;
      name.style.color = "grey";
      name.style.border = "thin solid grey";
      name.style.padding = "9px";

      price.disabled = false;
      price.style.color = "grey";
      price.style.border = "thin solid grey";
      price.style.padding = "0.95px";
      price.type = "number";

      status.disabled = false;
      status.style.color = "grey";
      status.style.border = "thin solid grey";
      status.style.padding = "0.95px";

      number.disabled = false;
      number.style.color = "grey";
      number.style.border = "thin solid grey";
      number.style.padding = "0.95px";
      number.type = "number";

      introduction.disabled = false;
      introduction.style.color = "grey";
      introduction.style.border = "thin solid grey";
      introduction.style.padding = "0.95px";
      introduction.style.width = "100%";

      sel.style.visibility = 'visible';
      type.type = "hidden"

      picture.style.opacity = 0.5;  
      picture_edit.type = "file";

      button.value = "確認送出";
      form.method = "post";

    } else{
       form.submit();
    }
  }
</script>
</body>
</html>